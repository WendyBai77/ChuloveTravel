import{O as T}from"./OrderTimeLine-f10b1faf.js";import{S as _}from"./sweetalert2.all-c2759fe7.js";import{_ as I,r as f,o as l,c as d,a as s,b as g,w as L,h as O,i as E,F as x,j as C,d as a,t,A as V}from"./index-8e6ca9d0.js";const{VITE_API:b,VITE_PATH:y}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wendybai",BASE_URL:"/ChuloveTravel/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},j={data(){return{isLoading:!1,fullPage:!0,color:"#ACB1E7",order:{products:[],user:{}},orderId:""}},components:{OrderTimeLine:T},methods:{getOrder(){this.isLoading=!0,this.$http.get(`${b}/api/${y}/order/${this.orderId}`).then(i=>{this.isLoading=!1;const{order:o}=i.data;this.order=o}).catch(i=>{var n,c;const o=((c=(n=i.response)==null?void 0:n.data)==null?void 0:c.message)||"資料錯誤";this.isLoading=!1,_.fire({icon:"error",title:o})})},payOrder(){this.isLoading=!0,window.scrollTo({top:0,behavior:"smooth"}),this.$http.post(`${b}/api/${y}/pay/${this.orderId}`).then(()=>{this.isLoading=!1,this.getOrder(),_.fire({icon:"success",title:"確認已成功付款",showConfirmButton:!1,timer:1500})}).catch(i=>{var n,c;const o=((c=(n=i.response)==null?void 0:n.data)==null?void 0:c.message)||"資料錯誤";this.isLoading=!1,_.fire({icon:"error",title:o})})}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},k=s("div",null,"這裡是 購物車結帳頁",-1),A={class:"cart-complete container"},S={key:0,class:"cart-complete-top d-flex flex-column justify-content-between align-items-center"},B=s("h2",{class:"mb-6 mt-7 text-center h2-style"},[a(" 訂單完成！"),s("span",{class:"mt-2"},"感謝訂購")],-1),D=s("h2",{class:"mb-6 h2-style"},"祝您有段美好的旅程",-1),P={class:"row orders-confirm-complete justify-content-center"},M={class:"orders-confirm col-lg-8 mb-6"},N=s("h2",{class:"mb-5 mt-6 h2-style"},"訂單資訊",-1),R={class:"orders mb-1"},F={class:"card card-row flex-row"},H=["src"],U={class:"card-body d-flex flex-column justify-content-between"},W={class:"card-title mb-2 pe-5"},q={class:"d-flex flex-md-row flex-column justify-content-md-between align-items-md-center align-items-end"},z={class:"fs-5"},$={class:"card-price card-price-title"},G={class:"fs-6 d-flex flex-nowrap align-items-center"},J={class:"ps-2"},K={class:"orders-total px-lg-3 pt-3"},Q=s("h3",null,"總計",-1),X={class:"card-price text-pink-300 text-end fs-6"},Y={class:"ps-2"},Z={class:"col-lg-8 mb-8"},ss={class:"cart-complete-footer px-lg-3 pt-5 border-top"},es=s("h3",null,"訂單編號",-1),ts={class:"text-right"},os=s("h3",null,"收件人姓名",-1),rs={class:"text-right"},is=s("h3",null,"收件人電話",-1),ns={class:"text-right"},cs=s("h3",null,"Email",-1),ls={class:"text-right"},ds=s("h3",null,"付款狀態",-1),as={class:"d-flex justify-content-sm-end justify-content-center mt-5"},_s={type:"submit",class:"btn btn-outline-danger btn-lg px-5"};function hs(i,o,n,c,e,h){const v=f("OrderTimeLine"),w=f("router-link");return l(),d(x,null,[k,s("div",A,[g(v),e.order.is_paid===!0?(l(),d("div",S,[B,D,g(w,{class:"btn btn-primary px-6 py-2 mb-6",to:"/"},{default:L(()=>[a("回首頁")]),_:1})])):O("",!0),s("form",{onSubmit:o[0]||(o[0]=E((...r)=>h.payOrder&&h.payOrder(...r),["prevent"]))},[s("div",P,[s("div",M,[N,s("ul",R,[(l(!0),d(x,null,C(e.order.products,r=>{var p,u,m;return l(),d("li",{class:"mb-3",key:r.id},[s("div",F,[s("img",{class:"card-row-img object-cover orders-img",src:(p=r.product)==null?void 0:p.imageUrl},null,8,H),s("div",U,[s("h2",W,t((u=r.product)==null?void 0:u.title),1),s("div",q,[s("p",z,"數量："+t(r.qty),1),s("div",$,[s("p",G,[a(" TWD "),s("span",J,t((m=r.product)==null?void 0:m.price),1)])])])])])])}),128))]),s("ul",K,[s("li",null,[Q,s("p",X,[a(" TWD "),s("span",Y,t(e.order.total),1)])])])]),s("div",Z,[s("ul",ss,[s("li",null,[es,s("p",ts,t(e.orderId),1)]),s("li",null,[os,s("p",rs,t(e.order.user.name),1)]),s("li",null,[is,s("p",ns,t(e.order.user.tel),1)]),s("li",null,[cs,s("p",ls,t(e.order.user.email),1)]),s("li",null,[ds,s("p",{class:V(["text-right paid-text-style",{"text-success":e.order.is_paid}])},t(e.order.is_paid?"付款完成":"尚未付款"),3)]),s("div",as,[s("button",_s,t(e.order.is_paid?"付款完成":"確認付款"),1)])])])])],32)])],64)}const fs=I(j,[["render",hs]]);export{fs as default};
