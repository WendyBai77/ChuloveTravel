import{O}from"./OrderTimeLine-2a65759d.js";import{S as h}from"./sweetalert2.all-8f5eafcc.js";import{_ as T,r as f,o as d,c as a,a as e,b as g,w as I,h as L,i as E,F as x,j as C,d as _,t as o,n as V}from"./index-62ce10a4.js";const{VITE_API:b,VITE_PATH:y}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wendybai",BASE_URL:"/ChuloveTravel/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},j={data(){return{isLoading:!1,fullPage:!0,color:"#ACB1E7",order:{products:[],user:{}},orderId:""}},components:{OrderTimeLine:O},methods:{getOrder(){this.isLoading=!0,this.$http.get(`${b}/api/${y}/order/${this.orderId}`).then(t=>{this.isLoading=!1;const{order:r}=t.data;this.order=r,console.log("getOrder 取出訂單資料",t)}).catch(t=>{var n,c,s,l;const r=((c=(n=t.response)==null?void 0:n.data)==null?void 0:c.message)||"資料錯誤";console.log("getOrder 取出訂單資料",(l=(s=t.response)==null?void 0:s.data)==null?void 0:l.message),this.isLoading=!1,h.fire({icon:"error",title:r})})},payOrder(){this.isLoading=!0,this.$http.post(`${b}/api/${y}/pay/${this.orderId}`).then(t=>{this.isLoading=!1,this.getOrder(),console.log("payOrder",t),h.fire({icon:"success",title:"確認已成功付款",showConfirmButton:!1,timer:1500})}).catch(t=>{var n,c;const r=((c=(n=t.response)==null?void 0:n.data)==null?void 0:c.message)||"資料錯誤";this.isLoading=!1,h.fire({icon:"error",title:r})})}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},k=e("div",null,"這裡是 購物車結帳頁",-1),S={class:"cart-complete container"},A={key:0,class:"cart-complete-top d-flex flex-column justify-content-between align-items-center"},B=e("h2",{class:"mb-6 mt-7 text-center h2-style"},[_(" 訂單完成！"),e("span",{class:"mt-2"},"感謝訂購")],-1),D=e("h2",{class:"mb-6 h2-style"},"祝您有段美好的旅程",-1),P={class:"row orders-confirm-complete justify-content-center"},M={class:"orders-confirm col-lg-8 mb-6"},N=e("h2",{class:"mb-5 mt-6 h2-style"},"訂單資訊",-1),R={class:"orders mb-1"},F={class:"card card-row flex-row"},H=["src"],U={class:"card-body d-flex flex-column justify-content-between"},W={class:"card-title mb-2 pe-5"},q={class:"d-flex flex-md-row flex-column justify-content-md-between align-items-md-center align-items-end"},z={class:"fs-5"},$={class:"card-price card-price-title"},G={class:"fs-6 d-flex flex-nowrap align-items-center"},J={class:"ps-2"},K={class:"orders-total px-lg-3 pt-3"},Q=e("h3",null,"總計",-1),X={class:"card-price text-pink-300 text-end fs-6"},Y={class:"ps-2"},Z={class:"col-lg-8 mb-8"},ee={class:"cart-complete-footer px-lg-3 pt-5 border-top"},se=e("h3",null,"訂單編號",-1),te={class:"text-right"},oe=e("h3",null,"收件人姓名",-1),re={class:"text-right"},ie=e("h3",null,"收件人電話",-1),ne={class:"text-right"},ce=e("h3",null,"Email",-1),le={class:"text-right"},de=e("h3",null,"付款狀態",-1),ae={class:"d-flex justify-content-sm-end justify-content-center mt-5"},_e={type:"submit",class:"btn btn-outline-danger btn-lg px-5"};function he(t,r,n,c,s,l){const v=f("OrderTimeLine"),w=f("router-link");return d(),a(x,null,[k,e("div",S,[g(v),s.order.is_paid===!0?(d(),a("div",A,[B,D,g(w,{class:"btn btn-primary px-6 py-2 mb-6",to:"/"},{default:I(()=>[_("回首頁")]),_:1})])):L("",!0),e("form",{onSubmit:r[0]||(r[0]=E((...i)=>l.payOrder&&l.payOrder(...i),["prevent"]))},[e("div",P,[e("div",M,[N,e("ul",R,[(d(!0),a(x,null,C(s.order.products,i=>{var p,u,m;return d(),a("li",{class:"mb-3",key:i.id},[e("div",F,[e("img",{class:"card-row-img object-cover orders-img",src:(p=i.product)==null?void 0:p.imageUrl},null,8,H),e("div",U,[e("h2",W,o((u=i.product)==null?void 0:u.title),1),e("div",q,[e("p",z,"數量："+o(i.qty),1),e("div",$,[e("p",G,[_(" TWD "),e("span",J,o((m=i.product)==null?void 0:m.price),1)])])])])])])}),128))]),e("ul",K,[e("li",null,[Q,e("p",X,[_(" TWD "),e("span",Y,o(s.order.total),1)])])])]),e("div",Z,[e("ul",ee,[e("li",null,[se,e("p",te,o(s.orderId),1)]),e("li",null,[oe,e("p",re,o(s.order.user.name),1)]),e("li",null,[ie,e("p",ne,o(s.order.user.tel),1)]),e("li",null,[ce,e("p",le,o(s.order.user.email),1)]),e("li",null,[de,e("p",{class:V(["text-right paid-text-style",{"text-success":s.order.is_paid}])},o(s.order.is_paid?"付款完成":"尚未付款"),3)]),e("div",ae,[e("button",_e,o(s.order.is_paid?"付款完成":"確認付款"),1)])])])])],32)])],64)}const fe=T(j,[["render",he]]);export{fe as default};
