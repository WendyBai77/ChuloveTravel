import{i as y,j as P,_ as k,f as h,m as S,k as T,r as f,o as i,c as l,b as g,a as e,F as n,h as d,l as w,v as L,d as p,n as _,p as m,t as a,w as E}from"./index-af9a0c5b.js";import{c as V}from"./cartStore-644748a0.js";import{S as $}from"./sweetalert2.all-f50427fa.js";const{VITE_API:A,VITE_PATH:j}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wendybai",BASE_URL:"/ChuloveTravel/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},u=y("productsStore",{state:()=>({products:[],selectSort:"default",isLoading:!1,fullPage:!0,color:"#ACB1E7",renderProduct:[],filterCategory:"全部商品",categories:["全部商品","行程","住宿","景點門票"]}),actions:{getProducts(){this.isLoading=!0,window.scrollTo({top:0,behavior:"smooth"}),P.get(`${A}/api/${j}/products/all`).then(t=>{const{products:o}=t.data;this.products=o,console.log("this.products",this.products),this.isLoading=!1}).catch(t=>{var r,c;console.log(t.response.data.message);const o=((c=(r=t.response)==null?void 0:r.data)==null?void 0:c.message)||"資料取得失敗，請稍後再試";this.isLoading=!1,$.fire({icon:"error",title:o})})},changeCategory(t){this.filterCategory=t,this.sortProducts()},sortProducts(){let t=this.products;this.filterCategory!=="全部商品"&&(t=this.products.filter(o=>o.category===this.filterCategory)),this.selectSort==="expensiveToCheap"?t.sort((o,r)=>r.price-o.price):this.selectSort==="cheapToExpensive"&&t.sort((o,r)=>o.price-r.price),this.renderProduct=t}},getters:{filterProducts:t=>t.products.filter(r=>t.filterCategory==="全部商品"?t.products:r.category===t.filterCategory)}}),D={data(){return{}},methods:{...h(V,["addToCart"]),...h(u,["getProducts","changeCategory","sortProducts"])},computed:{...S(u,["products","renderProduct","filterProducts","filterCategory","categories","isLoading","fullPage","color"]),...T(u,["selectSort"])},mounted(){this.getProducts()}},I=e("div",{class:"banner container"},[e("div",{class:"banner-content banner-content-products"},[e("h2",{class:"text-gary-100 mb-4"},[e("span",null," 愛最大 玩最好"),p(" 創造美好回憶不用等 ")])])],-1),x={class:"container pt-lg-3"},B={class:"row"},M={class:"nav-list nav-list-md d-lg-none d-flex justify-content-center border-0 pt-sm-7 pb-sm-5"},U=["onClick"],N=e("i",{class:"bi bi-dash-lg link-icon"},null,-1),R={class:"row py-lg-5"},F={class:"col-lg-3 mb-lg-0"},H={class:"nav-list d-lg-block d-none d-flex flex-lg-column flex-md-row"},O=["onClick"],W={class:"container col-lg-9"},z={class:"d-flex justify-content-end mb-lg-4 mb-3"},X=e("option",{disabled:"",value:"default"},"產品預設排列",-1),q=e("option",{value:"cheapToExpensive"},"價格：低至高",-1),G=e("option",{value:"expensiveToCheap"},"價格：高至低",-1),J=[X,q,G],K={key:0,class:"mt-7 text-center"},Q={key:1,class:"products mb-7"},Y=["src"],Z={class:"card-body ps-md-5 pe-md-6 d-flex flex-column justify-content-between"},tt={class:"card-title mb-3"},et={class:"truncate-multiline mb-4"},st={class:"d-flex justify-content-end"},ot={class:"card-price"},rt={class:"fs-6"},it=e("a",{class:"like-icon",href:"#"},[e("i",{class:"fa-regular fa-heart"}),e("i",{class:"fa-solid fa-heart collect"})],-1),lt=["onClick"],at=e("i",{class:"bi bi-cart-fill"},null,-1),nt=[at];function ct(t,o,r,c,dt,ut){const v=f("VueLoading"),C=f("router-link");return i(),l(n,null,[g(v,{active:t.isLoading,"onUpdate:active":o[0]||(o[0]=s=>t.isLoading=s),color:t.color,"is-full-page":t.fullPage},null,8,["active","color","is-full-page"]),I,e("div",x,[e("div",B,[e("ul",M,[(i(!0),l(n,null,d(t.categories,s=>(i(),l("li",{key:s},[e("a",{class:_(["nav-link",{active:s===t.filterCategory}]),style:{cursor:"pointer"},onClick:m(b=>t.changeCategory(s),["prevent"])},[p(a(s)+" ",1),N],10,U)]))),128))])]),e("div",R,[e("div",F,[e("ul",H,[(i(!0),l(n,null,d(t.categories,s=>(i(),l("li",{key:s},[e("a",{class:_(["nav-link",{active:s===t.filterCategory}]),style:{cursor:"pointer"},onClick:m(b=>t.changeCategory(s),["prevent"])},a(s),11,O)]))),128))])]),e("div",W,[e("div",z,[w(e("select",{class:"products-select text-center",name:"productsSort","onUpdate:modelValue":o[1]||(o[1]=s=>t.selectSort=s),onChange:o[2]||(o[2]=(...s)=>t.sortProducts&&t.sortProducts(...s))},J,544),[[L,t.selectSort]])]),t.filterProducts.length===0?(i(),l("h2",K,"無相符產品")):(i(),l("ul",Q,[(i(!0),l(n,null,d(t.filterProducts,s=>(i(),l("li",{class:"mb-3",key:s.id},[g(C,{class:"card card-row",to:`/product/${s.id}`},{default:E(()=>[e("img",{class:"card-row-img object-cover",src:s.imageUrl,alt:"Xpark"},null,8,Y),e("div",Z,[e("div",null,[e("h2",tt,a(s.title),1),e("p",et,a(s.description),1)]),e("div",st,[e("div",ot,[e("p",rt,[p(" TWD "),e("span",null,a(s.price),1)])])])])]),_:2},1032,["to"]),it,e("button",{type:"button",class:"ms-2 border-0 p-0",onClick:()=>t.addToCart(s.id)},nt,8,lt)]))),128))]))])])])],64)}const gt=k(D,[["render",ct]]);export{gt as default};
