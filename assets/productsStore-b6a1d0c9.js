import{p as s,q as i}from"./index-89b9def9.js";import{S as c}from"./sweetalert2.all-35eb31f1.js";import{c as a}from"./collectionsStore-afe31d5c.js";const l=a(),{VITE_API:u,VITE_PATH:d}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wendybai",BASE_URL:"/ChuloveTravel/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},f=s("productsStore",{state:()=>({products:[],selectSort:"default",isLoading:!1,fullPage:!0,color:"#ACB1E7",filterCategory:"全部商品",categories:["全部商品","行程","住宿","景點門票"],cityProducts:[]}),actions:{getProducts(){this.isLoading=!0,window.scrollTo({top:0,behavior:"smooth"}),i.get(`${u}/api/${d}/products/all`).then(t=>{const{products:e}=t.data;this.products=e,console.log("this.products",this.products),l.tempProducts(this.products),this.isLoading=!1}).catch(t=>{var o,r;console.log(t.response.data.message);const e=((r=(o=t.response)==null?void 0:o.data)==null?void 0:r.message)||"資料取得失敗，請稍後再試";this.isLoading=!1,c.fire({icon:"error",title:e})})},changeCategory(t){this.filterCategory=t,this.sortProduct()},sortProduct(){let t=this.products;this.filterCategory!=="全部商品"&&(t=this.products.filter(e=>e.category===this.filterCategory)),this.selectSort==="expensiveToCheap"?t.sort((e,o)=>o.price-e.price):this.selectSort==="cheapToExpensive"&&t.sort((e,o)=>e.price-o.price)},getCityProduct(t){this.cityProducts=this.products.filter(e=>e.title.match(t))}},getters:{filterProducts:t=>t.products.filter(o=>t.filterCategory==="全部商品"?t.products:o.category===t.filterCategory)}});export{f as p};
