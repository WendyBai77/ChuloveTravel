import{G as l,H as o}from"./index-8e6ca9d0.js";import{S as a}from"./sweetalert2.all-c2759fe7.js";const{VITE_API:r,VITE_PATH:n}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wendybai",BASE_URL:"/ChuloveTravel/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},u=l("cartStore",{state:()=>({cart:{},total:0,final_total:0,isLoading:!1,fullPage:!0,color:"#ACB1E7",loadingStatus:{loadingItem:""},coupon_code:""}),actions:{getCart(){this.isLoading=!0,o.get(`${r}/api/${n}/cart`).then(t=>{this.cart=t.data.data,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.qty=t.data.data.qty,this.isLoading=!1}).catch(t=>{this.isLoading=!1,a.fire({icon:"error",title:t.response.data.message})})},addToCart(t,e=1){this.isLoading=!0,this.loadingStatus.loadingItem=t;const i={product_id:t,qty:e};o.post(`${r}/api/${n}/cart`,{data:i}).then(s=>{this.isLoading=!1,this.loadingStatus.loadingItem="",a.fire({icon:"success",title:s.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(s=>{a.fire({icon:"error",title:s.response.data.message})})},updateCart(t,e){this.isLoading=!0,this.loadingStatus.loadingItem=t.id;const i={product_id:t.product_id,qty:e};o.put(`${r}/api/${n}/cart/${t.id}`,{data:i}).then(s=>{this.isLoading=!1,this.loadingStatus.loadingItem="",a.fire({icon:"success",title:s.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(s=>{this.loadingStatus.loadingItem="",a.fire({icon:"error",title:s.response.data.message})})},deleteAllCarts(){this.isLoading=!0,o.delete(`${r}/api/${n}/carts`).then(t=>{this.isLoading=!1,a.fire({icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(t=>{a.fire({icon:"error",title:t.response.data.message})})},removeCartItem(t){this.isLoading=!0,this.loadingStatus.loadingItem=t,o.delete(`${r}/api/${n}/cart/${t}`).then(e=>{this.isLoading=!1,this.loadingStatus.loadingItem="",a.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(e=>{this.loadingStatus.loadingItem="",a.fire({icon:"error",title:e.response.data.message})})},addCoupon(t){this.isLoading=!0,this.coupon_code=t;const e={code:this.coupon_code};o.post(`${r}/api/${n}/coupon`,{data:e}).then(i=>{this.isLoading=!1,a.fire({icon:"success",title:`已套用折價券：${this.coupon_code}`||i.data.message,showConfirmButton:!1,timer:1500}),this.getCart(),this.coupon_code=""}).catch(i=>{var d,c;const s=((c=(d=i.response)==null?void 0:d.data)==null?void 0:c.message)||"輸入的資料錯誤";this.isLoading=!1,a.fire({icon:"error",title:s})})}},getters:{}});export{u as c};
